From 1f698db07bfa929acb933775e8bdb25c13786d2e Mon Sep 17 00:00:00 2001
From: Eli Collins <eli@cloudera.com>
Date: Fri, 31 Aug 2012 15:17:03 -0700
Subject: [PATCH 0473/1357] Revert "HADOOP-8551. fs -mkdir creates parent directories without the -p option (John George via bobby)"

This reverts commit cbc2cd9d786afdae9a31359f74630e933171245d.
---
 .../java/org/apache/hadoop/fs/shell/Mkdir.java     |    8 +-
 .../src/test/resources/testHDFSConf.xml            |  362 +++++++++-----------
 2 files changed, 164 insertions(+), 206 deletions(-)

diff --git a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Mkdir.java b/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Mkdir.java
index d92a534..eb0fd22 100644
--- a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Mkdir.java
+++ b/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/Mkdir.java
@@ -23,11 +23,9 @@ import java.util.LinkedList;
 
 import org.apache.hadoop.classification.InterfaceAudience;
 import org.apache.hadoop.classification.InterfaceStability;
-import org.apache.hadoop.fs.Path;
 import org.apache.hadoop.fs.shell.PathExceptions.PathExistsException;
 import org.apache.hadoop.fs.shell.PathExceptions.PathIOException;
 import org.apache.hadoop.fs.shell.PathExceptions.PathIsNotDirectoryException;
-import org.apache.hadoop.fs.shell.PathExceptions.PathNotFoundException;
 
 /**
  * Create the given dir
@@ -68,11 +66,7 @@ class Mkdir extends FsCommand {
 
   @Override
   protected void processNonexistentPath(PathData item) throws IOException {
-    // check if parent exists. this is complicated because getParent(a/b/c/) returns a/b/c, but
-    // we want a/b
-    if (!item.fs.exists(new Path(item.path.toString()).getParent()) && !createParents) {
-      throw new PathNotFoundException(item.toString());
-    }
+    // TODO: should use createParents to control intermediate dir creation 
     if (!item.fs.mkdirs(item.path)) {
       throw new PathIOException(item.toString());
     }
diff --git a/hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testHDFSConf.xml b/hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testHDFSConf.xml
index d05dcc6..9106114 100644
--- a/hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testHDFSConf.xml
+++ b/hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testHDFSConf.xml
@@ -131,7 +131,7 @@
     <test> <!-- TESTED -->
       <description>ls: directory using relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
         <command>-fs NAMENODE -ls </command>
       </test-commands>
       <cleanup-commands>
@@ -152,10 +152,10 @@
     <test> <!-- TESTED -->
       <description>ls: directory using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir3</command>
-        <command>-fs NAMENODE -mkdir -p dir4</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir3</command>
+        <command>-fs NAMENODE -mkdir dir4</command>
         <command>-fs NAMENODE -ls </command>
       </test-commands>
       <cleanup-commands>
@@ -310,7 +310,7 @@
     <test> <!-- TESTED -->
       <description>ls: Non-URI input dir at Namenode's path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p NAMENODE/user/dir1</command>
+        <command>-fs NAMENODE -mkdir NAMENODE/user/dir1</command>
         <command>-fs NAMENODE -ls hdfs:///user/</command>
       </test-commands>
       <cleanup-commands>
@@ -331,7 +331,7 @@
     <test> <!-- TESTED -->
       <description>ls: dir at hdfs:// path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p hdfs:///user/dir1</command>
+        <command>-fs NAMENODE -mkdir hdfs:///user/dir1</command>
         <command>-fs NAMENODE -ls hdfs:///user/</command>
       </test-commands>
       <cleanup-commands>
@@ -352,9 +352,9 @@
     <test> <!-- TESTED -->
       <description>ls: Non-URI input dir at Namenode's path using globing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p NAMENODE/user/dir1</command>
-        <command>-fs NAMENODE -mkdir -p NAMENODE/user/dir2</command>
-        <command>-fs NAMENODE -mkdir -p NAMENODE/user/dir3</command>
+        <command>-fs NAMENODE -mkdir NAMENODE/user/dir1</command>
+        <command>-fs NAMENODE -mkdir NAMENODE/user/dir2</command>
+        <command>-fs NAMENODE -mkdir NAMENODE/user/dir3</command>
         <command>-fs NAMENODE -ls hdfs:///user/</command>
       </test-commands>
       <cleanup-commands>
@@ -383,9 +383,9 @@
     <test> <!-- TESTED -->
       <description>ls: dir at hdfs:// path using globing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p hdfs:///user/dir1</command>
-        <command>-fs NAMENODE -mkdir -p hdfs:///user/dir2</command>
-        <command>-fs NAMENODE -mkdir -p hdfs:///user/dir3</command>
+        <command>-fs NAMENODE -mkdir hdfs:///user/dir1</command>
+        <command>-fs NAMENODE -mkdir hdfs:///user/dir2</command>
+        <command>-fs NAMENODE -mkdir hdfs:///user/dir3</command>
         <command>-fs NAMENODE -ls hdfs:///user/</command>
       </test-commands>
       <cleanup-commands>
@@ -535,13 +535,13 @@
     <test> <!-- TESTED -->
       <description>ls: files/directories using relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2/dir2</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -623,13 +623,13 @@
     <test> <!-- TESTED -->
       <description>ls: files/directories using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2/dir2</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -1049,7 +1049,7 @@
     <test> <!-- TESTED -->
       <description>du: directory using relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes dir0/data15bytes</command>
         <command>-fs NAMENODE -du dir0</command>
       </test-commands>
@@ -1356,13 +1356,13 @@
     <test> <!-- TESTED -->
       <description>dus: directories/files using relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2/dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir2/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir2/dir2</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes dir0/dir1/data15bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data30bytes dir0/dir1/data30bytes</command>
@@ -3288,7 +3288,7 @@
     <test> <!-- TESTED -->
       <description>rm: removing a directory (relative path) </description>
       <test-commands>
-        <command>-fs NAMENODE mkdir -p dir0</command>
+        <command>-fs NAMENODE mkdir dir0</command>
         <command>-fs NAMENODE -rm dir0</command>
       </test-commands>
       <cleanup-commands>
@@ -3621,7 +3621,7 @@
     <test> <!-- TESTED -->
       <description>rm: removing a directory (relative path) </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
         <command>-fs NAMENODE -rm -r dir0</command>
       </test-commands>
       <cleanup-commands>
@@ -3670,10 +3670,10 @@
     <test> <!-- TESTED -->
       <description>rm: removing directories by globbing (relative path) </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir3</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir3</command>
         <command>-fs NAMENODE -rm -r dir*</command>
       </test-commands>
       <cleanup-commands>
@@ -4002,7 +4002,7 @@
     <test> <!-- TESTED -->
       <description>put: putting file into a directory(absolute path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p /dir0/dir1/data</command>
+        <command>-fs NAMENODE -mkdir /dir0/dir1/data</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes /dir0/dir1/data</command> -->
         <command>-fs NAMENODE -du /dir0/dir1/data</command>
       </test-commands>
@@ -4020,7 +4020,7 @@
     <test> <!-- TESTED -->
       <description>put: putting file into a directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/data</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/data</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes dir0/dir1/data</command>
         <command>-fs NAMENODE -du dir0/dir1/data</command>
       </test-commands>
@@ -4060,7 +4060,7 @@
     <test> <!-- TESTED -->
       <description>put: putting many files into an existing directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes CLITEST_DATA/data30bytes dir0</command>
         <command>-fs NAMENODE -du dir0</command>
       </test-commands>
@@ -4228,7 +4228,7 @@
     <test> <!-- TESTED -->
       <description>put: putting file into a directory in hdfs:// path </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p /dir1/data</command>
+        <command>-fs NAMENODE -mkdir /dir1/data</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes hdfs:///dir1/data</command>
         <command>-fs NAMENODE -du hdfs:///dir1/data/</command>
       </test-commands>
@@ -4352,7 +4352,7 @@
     <test> <!-- TESTED -->
       <description>put: putting file into a directory in Namenode's path </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p /dir1/data</command>
+        <command>-fs NAMENODE -mkdir /dir1/data</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes NAMENODE/dir1/data</command>
         <command>-fs NAMENODE -du NAMENODE/dir1/data</command>
       </test-commands>
@@ -4496,7 +4496,7 @@
     <test> <!-- TESTED -->
       <description>copyFromLocal: copying file into a directory(absolute path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p /dir0/dir1/data</command>
+        <command>-fs NAMENODE -mkdir /dir0/dir1/data</command>
         <command>-fs NAMENODE -copyFromLocal CLITEST_DATA/data15bytes /dir0/dir1/data</command>
         <command>-fs NAMENODE -du /dir0/dir1/data/*</command>
       </test-commands>
@@ -4514,7 +4514,7 @@
     <test> <!-- TESTED -->
       <description>copyFromLocal: copying file into a directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1/data</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1/data</command>
         <command>-fs NAMENODE -copyFromLocal CLITEST_DATA/data15bytes dir0/dir1/data</command>
         <command>-fs NAMENODE -du dir0/dir1/data/*</command>
       </test-commands>
@@ -4554,7 +4554,7 @@
     <test> <!-- TESTED -->
       <description>copyFromLocal: copying many files into an existing directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
         <command>-fs NAMENODE -copyFromLocal CLITEST_DATA/data15bytes CLITEST_DATA/data30bytes dir0</command>
         <command>-fs NAMENODE -du dir0</command>
       </test-commands>
@@ -5085,7 +5085,7 @@
     <test> <!-- TESTED-->
       <description>cat: contents of files(relative path) using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes dir0/data15bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data30bytes dir0/data30bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data60bytes dir0/data60bytes</command>
@@ -5127,7 +5127,7 @@
     <test> <!-- TESTED-->
       <description>cat: contents of files(relative path) without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes dir0/data15bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data30bytes dir0/data30bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data60bytes dir0/data60bytes</command>
@@ -5196,7 +5196,7 @@
     <test> <!-- TESTED -->
       <description>cat: contents of directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
         <command>-fs NAMENODE -cat dir1</command>
       </test-commands>
       <cleanup-commands>
@@ -5478,30 +5478,11 @@
         </comparator>
       </comparators>
     </test>
- 
-    <test> <!-- TESTED -->
-      <description>mkdir: creating directory (absolute path) </description>
-      <test-commands>
-        <command>-fs NAMENODE -mkdir /dir0</command>
-        <command>-fs NAMENODE -mkdir /dir0/b/</command>
-        <command>-fs NAMENODE -du -s /dir0/b</command>
-      </test-commands>
-      <cleanup-commands>
-        <command>-fs NAMENODE -rm /user</command>
-      </cleanup-commands>
-      <comparators>
-        <comparator>
-          <type>RegexpComparator</type>
-          <expected-output>^0\s+/dir0/b</expected-output>
-        </comparator>
-      </comparators>
-    </test>
     
-   
     <test> <!-- TESTED -->
       <description>mkdir: creating directory (relative path) </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0 </command>
+        <command>-fs NAMENODE -mkdir dir0 </command>
         <command>-fs NAMENODE -du -s dir0</command>
       </test-commands>
       <cleanup-commands>
@@ -5550,10 +5531,10 @@
     <test> <!-- TESTED -->
       <description>mkdir: creating many directories (relative path) </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0 </command>
-        <command>-fs NAMENODE -mkdir -p dir1 </command>
-        <command>-fs NAMENODE -mkdir -p dir2 </command>
-        <command>-fs NAMENODE -mkdir -p dir3 </command>
+        <command>-fs NAMENODE -mkdir dir0 </command>
+        <command>-fs NAMENODE -mkdir dir1 </command>
+        <command>-fs NAMENODE -mkdir dir2 </command>
+        <command>-fs NAMENODE -mkdir dir3 </command>
         <command>-fs NAMENODE -du -s dir*</command>
       </test-commands>
       <cleanup-commands>
@@ -5600,7 +5581,7 @@
       <description>mkdir: creating a directory with the name of an already existing file</description>
       <test-commands>
         <command>-fs NAMENODE -put CLITEST_DATA/data15bytes data15bytes</command>
-        <command>-fs NAMENODE -mkdir -p data15bytes</command>
+        <command>-fs NAMENODE -mkdir data15bytes</command>
       </test-commands>
       <cleanup-commands>
         <command>-fs NAMENODE -rm -r data15bytes</command>
@@ -5774,27 +5755,10 @@
     </test>
 
     <test> <!-- TESTED -->
-      <description>mkdir: Test create of directory with no parent and no -p fails</description>
-      <test-commands>
-        <command>-fs NAMENODE -rm -r -f dir0</command>
-        <command>-fs NAMENODE -mkdir dir0/dir1</command>
-      </test-commands>
-      <cleanup-commands>
-        <command>-fs NAMENODE -rm -r dir0</command>
-      </cleanup-commands>
-      <comparators>
-        <comparator>
-          <type>RegexpComparator</type>
-          <expected-output>mkdir: `dir0/dir1': No such file or directory</expected-output>
-        </comparator>
-      </comparators>
-    </test>
-    
-    <test> <!-- TESTED -->
       <description>mkdir: Test recreate of existing directory fails</description>
       <test-commands>
         <command>-fs NAMENODE -rm -r -f dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -mkdir dir0/dir1</command>
       </test-commands>
       <cleanup-commands>
@@ -5812,7 +5776,7 @@
       <description>mkdir: Test recreate of existing directory with -p succeeds</description>
       <test-commands>
         <command>-fs NAMENODE -rm -r -f dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
       </test-commands>
       <cleanup-commands>
@@ -6439,7 +6403,7 @@
     <test> <!-- TESTED -->
       <description>stat: statistics about directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dirtest</command>
+        <command>-fs NAMENODE -mkdir dirtest</command>
         <command>-fs NAMENODE -stat "%n-%b-%o" dirtest</command>
       </test-commands>
       <cleanup-commands>
@@ -6500,7 +6464,7 @@
         <command>-fs NAMENODE -put CLITEST_DATA/data30bytes data30bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data60bytes data60bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data120bytes data120bytes</command>
-        <command>-fs NAMENODE -mkdir -p datadir</command>
+        <command>-fs NAMENODE -mkdir datadir</command>
         <command>-fs NAMENODE -stat "%n-%b" data*</command>
       </test-commands>
       <cleanup-commands>
@@ -6602,7 +6566,7 @@
         <command>-fs NAMENODE -put CLITEST_DATA/data30bytes hdfs:///dir0/data30bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data60bytes hdfs:///dir0/data60bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data120bytes hdfs:///dir0/data120bytes</command>
-        <command>-fs NAMENODE -mkdir -p hdfs:///dir0/datadir</command>
+        <command>-fs NAMENODE -mkdir hdfs:///dir0/datadir</command>
         <command>-fs NAMENODE -stat "%n-%b" hdfs:///dir0/data*</command>
       </test-commands>
       <cleanup-commands>
@@ -6689,7 +6653,7 @@
         <command>-fs NAMENODE -put CLITEST_DATA/data30bytes NAMENODE/dir0/data30bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data60bytes NAMENODE/dir0/data60bytes</command>
         <command>-fs NAMENODE -put CLITEST_DATA/data120bytes NAMENODE/dir0/data120bytes</command>
-        <command>-fs NAMENODE -mkdir -p NAMENODE/dir0/datadir</command>
+        <command>-fs NAMENODE -mkdir NAMENODE/dir0/datadir</command>
         <command>-fs NAMENODE -stat "%n-%b" NAMENODE/dir0/data*</command>
       </test-commands>
       <cleanup-commands>
@@ -6861,7 +6825,7 @@
     <test> <!-- TESTED -->
       <description>tail: contents of directory(relative path)</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
         <command>-fs NAMENODE -tail dir1</command>
       </test-commands>
       <cleanup-commands>
@@ -7069,7 +7033,7 @@
     <test> <!-- TESTED -->
       <description>count: directory using relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
         <command>-fs NAMENODE -count dir1</command>
       </test-commands>
       <cleanup-commands>
@@ -7277,10 +7241,10 @@
     <test> <!-- TESTED -->
       <description>count: relative path to multiple directories using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir3</command>
-        <command>-fs NAMENODE -mkdir -p dir4</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir3</command>
+        <command>-fs NAMENODE -mkdir dir4</command>
         <command>-fs NAMENODE -count dir* </command>
       </test-commands>
       <cleanup-commands>
@@ -7341,10 +7305,10 @@
     <test> <!-- TESTED -->
       <description>count: relative path to multiple directories without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir3</command>
-        <command>-fs NAMENODE -mkdir -p dir4</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir3</command>
+        <command>-fs NAMENODE -mkdir dir4</command>
         <command>-fs NAMENODE -count dir1 dir2 dir3 dir4 </command>
       </test-commands>
       <cleanup-commands>
@@ -7427,7 +7391,7 @@
     <test> <!-- TESTED -->
       <description>count: directory using relative path with -q option</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
         <dfs-admin-command>-fs NAMENODE -setQuota 10 dir1 </dfs-admin-command>
         <dfs-admin-command>-fs NAMENODE -setSpaceQuota 1m dir1 </dfs-admin-command>
         <command>-fs NAMENODE -count -q dir1</command>
@@ -7645,10 +7609,10 @@
     <test> <!-- TESTED -->
       <description>count: relative path to multiple directories using globbing with -q option</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir3</command>
-        <command>-fs NAMENODE -mkdir -p dir4</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir3</command>
+        <command>-fs NAMENODE -mkdir dir4</command>
         <dfs-admin-command>-fs NAMENODE -setQuota 10 dir1 </dfs-admin-command>
         <dfs-admin-command>-fs NAMENODE -setSpaceQuota 1m dir1 </dfs-admin-command>
         <dfs-admin-command>-fs NAMENODE -setQuota 10 dir2 </dfs-admin-command>
@@ -7725,10 +7689,10 @@
     <test> <!-- TESTED -->
       <description>count: relative path to multiple directories without globbing with -q option</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir1</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir3</command>
-        <command>-fs NAMENODE -mkdir -p dir4</command>
+        <command>-fs NAMENODE -mkdir dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir3</command>
+        <command>-fs NAMENODE -mkdir dir4</command>
         <dfs-admin-command>-fs NAMENODE -setQuota 10 dir1 </dfs-admin-command>
         <dfs-admin-command>-fs NAMENODE -setSpaceQuota 1m dir1 </dfs-admin-command>
         <dfs-admin-command>-fs NAMENODE -setQuota 10 dir2 </dfs-admin-command>
@@ -8589,8 +8553,8 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(octal mode) of directory in relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -8701,8 +8665,8 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(normal mode) of directory in relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -8769,8 +8733,8 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(octal mode) of directory in relative path recursively</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -8837,8 +8801,8 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(normal mode) of directory in relative path recursively</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -9056,13 +9020,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(octal mode) of multiple directories in relative path using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -9232,13 +9196,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(octal mode) of multiple directories in relative path without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -9408,13 +9372,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(normal mode) of multiple directories in relative path using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -9584,13 +9548,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(normal mode) of multiple directories in relative path without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -9694,13 +9658,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(octal mode) of multiple directories in relative path recursively using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -9804,13 +9768,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(octal mode) of multiple directories in relative path recursively without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -9914,13 +9878,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(normal mode) of multiple directories in relative path recursively using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -10024,13 +9988,13 @@
     <test> <!-- TESTED -->
       <description>chmod: change permission(normal mode) of multiple directories in relative path recursively without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -12290,8 +12254,8 @@
     <test> <!-- TESTED -->
       <description>chown: change ownership of directory in relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -12358,8 +12322,8 @@
     <test> <!-- TESTED -->
       <description>chown: change ownership of directory in relative path recursively </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -12545,13 +12509,13 @@
     <test> <!-- TESTED -->
       <description>chown: change ownership of multiple directories in relative path using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -12721,13 +12685,13 @@
     <test> <!-- TESTED -->
       <description>chown: change ownership of multiple directories in relative path without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -12831,13 +12795,13 @@
     <test> <!-- TESTED -->
       <description>chown: change ownership of multiple directories recursively in relative path using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -12941,13 +12905,13 @@
     <test> <!-- TESTED -->
       <description>chown: change ownership of multiple directories recursively in relative path without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -13569,8 +13533,8 @@
     <test> <!-- TESTED -->
       <description>chgrp: change group of directory in relative path</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -13637,8 +13601,8 @@
     <test> <!-- TESTED -->
       <description>chgrp: change group of directory in relative path recursively </description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
@@ -13824,13 +13788,13 @@
     <test> <!-- TESTED -->
       <description>chgrp: change group of multiple directories in relative path using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -14000,13 +13964,13 @@
     <test> <!-- TESTED -->
       <description>chgrp: change group of multiple directories in relative path without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -14110,13 +14074,13 @@
     <test> <!-- TESTED -->
       <description>chgrp: change group of multiple directories recursively in relative path using globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
@@ -14220,13 +14184,13 @@
     <test> <!-- TESTED -->
       <description>chgrp: change group of multiple directories recursively in relative path without globbing</description>
       <test-commands>
-        <command>-fs NAMENODE -mkdir -p dir0</command>
-        <command>-fs NAMENODE -mkdir -p dir0/dir1</command>
+        <command>-fs NAMENODE -mkdir dir0</command>
+        <command>-fs NAMENODE -mkdir dir0/dir1</command>
         <command>-fs NAMENODE -touchz dir0/file0</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir0/dir1/file2</command>
-        <command>-fs NAMENODE -mkdir -p dir2</command>
-        <command>-fs NAMENODE -mkdir -p dir2/dir1</command>
+        <command>-fs NAMENODE -mkdir dir2</command>
+        <command>-fs NAMENODE -mkdir dir2/dir1</command>
         <command>-fs NAMENODE -touchz dir2/file0</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file1</command>
         <command>-fs NAMENODE -touchz dir2/dir1/file2</command>
-- 
1.7.0.4

